<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">



<title>Introduction to iml: Interpretable Machine Learning in R</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">Introduction to iml: Interpretable Machine Learning in R</h1>



<p>Machine learning models usually perform really well for predictions, but are not interpretable. The iml package provides tools for analysing any black box machine learning model:</p>
<ul>
<li><p>Feature importance: Which were the most important features?</p></li>
<li><p>Feature effects: How does a feature influence the prediction? (Accumulated local effects, partial dependence plots and individual conditional expectation curves)</p></li>
<li><p>Explanations for single predictions: How did the feature values of a single data point affect its prediction? (LIME and Shapley value)</p></li>
<li><p>Surrogate trees: Can we approximate the underlying black box model with a short decision tree?</p></li>
<li><p>The iml package works for any classification and regression machine learning model: random forests, linear models, neural networks, xgboost, etc.</p></li>
</ul>
<p>This document shows you how to use the iml package to analyse machine learning models.</p>
<p>If you want to learn more about the technical details of all the methods, read chapters from: <a href="https://christophm.github.io/interpretable-ml-book/agnostic.html" class="uri">https://christophm.github.io/interpretable-ml-book/agnostic.html</a></p>
<div id="data-boston-housing" class="section level2">
<h2>Data: Boston Housing</h2>
<p>We’ll use the <code>MASS::Boston</code> dataset to demonstrate the abilities of the iml package. This dataset contains median house values from Boston neighbourhoods.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">&quot;Boston&quot;</span>, <span class="dt">package  =</span> <span class="st">&quot;MASS&quot;</span>)
<span class="kw">head</span>(Boston)
<span class="co">#&gt;      crim zn indus chas   nox    rm  age    dis rad tax ptratio  black</span>
<span class="co">#&gt; 1 0.00632 18  2.31    0 0.538 6.575 65.2 4.0900   1 296    15.3 396.90</span>
<span class="co">#&gt; 2 0.02731  0  7.07    0 0.469 6.421 78.9 4.9671   2 242    17.8 396.90</span>
<span class="co">#&gt; 3 0.02729  0  7.07    0 0.469 7.185 61.1 4.9671   2 242    17.8 392.83</span>
<span class="co">#&gt; 4 0.03237  0  2.18    0 0.458 6.998 45.8 6.0622   3 222    18.7 394.63</span>
<span class="co">#&gt; 5 0.06905  0  2.18    0 0.458 7.147 54.2 6.0622   3 222    18.7 396.90</span>
<span class="co">#&gt; 6 0.02985  0  2.18    0 0.458 6.430 58.7 6.0622   3 222    18.7 394.12</span>
<span class="co">#&gt;   lstat medv</span>
<span class="co">#&gt; 1  4.98 24.0</span>
<span class="co">#&gt; 2  9.14 21.6</span>
<span class="co">#&gt; 3  4.03 34.7</span>
<span class="co">#&gt; 4  2.94 33.4</span>
<span class="co">#&gt; 5  5.33 36.2</span>
<span class="co">#&gt; 6  5.21 28.7</span></code></pre></div>
</div>
<div id="fitting-the-machine-learning-model" class="section level2">
<h2>Fitting the machine learning model</h2>
<p>First we train a randomForest to predict the Boston median housing value:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">42</span>)
<span class="kw">library</span>(<span class="st">&quot;iml&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;randomForest&quot;</span>)
<span class="kw">data</span>(<span class="st">&quot;Boston&quot;</span>, <span class="dt">package  =</span> <span class="st">&quot;MASS&quot;</span>)
rf =<span class="st"> </span><span class="kw">randomForest</span>(medv <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> Boston, <span class="dt">ntree =</span> <span class="dv">50</span>)</code></pre></div>
</div>
<div id="using-the-iml-predictor-container" class="section level2">
<h2>Using the iml Predictor() container</h2>
<p>We create a <code>Predictor</code> object, that holds the model and the data. The iml package uses R6 classes: New objects can be created by calling <code>Predictor$new()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">X =<span class="st"> </span>Boston[<span class="kw">which</span>(<span class="kw">names</span>(Boston) <span class="op">!=</span><span class="st"> &quot;medv&quot;</span>)]
predictor =<span class="st"> </span>Predictor<span class="op">$</span><span class="kw">new</span>(rf, <span class="dt">data =</span> X, <span class="dt">y =</span> Boston<span class="op">$</span>medv)</code></pre></div>
</div>
<div id="feature-importance" class="section level2">
<h2>Feature importance</h2>
<p>We can measure how important each feature was for the predictions with <code>FeatureImp</code>. The feature importance measure works by shuffling each feature and measuring how much the performance drops. For this regression task we choose to measure the loss in performance with the mean absolute error (‘mae’), another choice would be the mean squared error (‘mse’).</p>
<p>Once we create a new object of <code>FeatureImp</code>, the importance is automatically computed. We can call the <code>plot()</code> function of the object or look at the results in a data.frame.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">imp =<span class="st"> </span>FeatureImp<span class="op">$</span><span class="kw">new</span>(predictor, <span class="dt">loss =</span> <span class="st">&quot;mae&quot;</span>)
<span class="kw">plot</span>(imp)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">imp<span class="op">$</span>results
<span class="co">#&gt;    feature original.error permutation.error importance</span>
<span class="co">#&gt; 1    lstat       0.985509          4.493824   4.559901</span>
<span class="co">#&gt; 2       rm       0.985509          3.488374   3.539668</span>
<span class="co">#&gt; 3      nox       0.985509          1.701160   1.726174</span>
<span class="co">#&gt; 4      dis       0.985509          1.620040   1.643861</span>
<span class="co">#&gt; 5     crim       0.985509          1.563403   1.586391</span>
<span class="co">#&gt; 6      age       0.985509          1.440940   1.462128</span>
<span class="co">#&gt; 7    indus       0.985509          1.433893   1.454977</span>
<span class="co">#&gt; 8  ptratio       0.985509          1.400163   1.420751</span>
<span class="co">#&gt; 9      tax       0.985509          1.389175   1.409601</span>
<span class="co">#&gt; 10   black       0.985509          1.193820   1.211375</span>
<span class="co">#&gt; 11     rad       0.985509          1.118840   1.135292</span>
<span class="co">#&gt; 12    chas       0.985509          1.029416   1.044552</span>
<span class="co">#&gt; 13      zn       0.985509          1.025463   1.040542</span></code></pre></div>
</div>
<div id="feature-effects" class="section level2">
<h2>Feature effects</h2>
<p>Besides knowing which features were important, we are interested in how the features influence the predicted outcome. The <code>FeatureEffect</code> class implements accumulated local effect plots, partial dependence plots and individual conditional expectation curves. The following plot shows the accumulated local effects (ALE) for the feature ‘lstat’. ALE shows how the prediction changes locally, when the feature is varied. The marks on the x-axis indicates the distribution of the ‘lstat’ feature, showing how relevant a region is for interpretation (little or no points mean that we should not over-interpret this region).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ale =<span class="st"> </span>FeatureEffect<span class="op">$</span><span class="kw">new</span>(predictor, <span class="dt">feature =</span> <span class="st">&quot;lstat&quot;</span>)
ale<span class="op">$</span><span class="kw">plot</span>()</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>If we want to compute the partial dependence curves on another feature, we can simply reset the feature:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ale<span class="op">$</span><span class="kw">set.feature</span>(<span class="st">&quot;rm&quot;</span>)
ale<span class="op">$</span><span class="kw">plot</span>()</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="measure-interactions" class="section level2">
<h2>Measure interactions</h2>
<p>We can also measure how strongly features interact with each other. The interaction measure regards how much of the variance of <span class="math inline">\(f(x)\)</span> is explained by the interaction. The measure is between 0 (no interaction) and 1 (= 100% of variance of <span class="math inline">\(f(x)\)</span> due to interactions). For each feature, we measure how much they interact with any other feature:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">interact =<span class="st"> </span>Interaction<span class="op">$</span><span class="kw">new</span>(predictor)
<span class="kw">plot</span>(interact)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>We can also specify a feature and measure all it’s 2-way interactions with all other features:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">interact =<span class="st"> </span>Interaction<span class="op">$</span><span class="kw">new</span>(predictor, <span class="dt">feature =</span> <span class="st">&quot;crim&quot;</span>)
<span class="kw">plot</span>(interact)</code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAADAFBMVEUAAAABAQECAgIDAwMEBAQFBQUGBgYHBwcICAgJCQkKCgoLCwsMDAwNDQ0ODg4PDw8QEBARERESEhITExMUFBQVFRUWFhYXFxcYGBgZGRkaGhobGxscHBwdHR0eHh4fHx8gICAhISEiIiIjIyMkJCQlJSUmJiYnJycoKCgpKSkqKiorKyssLCwtLS0uLi4vLy8wMDAxMTEyMjIzMzM0NDQ1NTU2NjY3Nzc4ODg5OTk6Ojo7Ozs8PDw9PT0+Pj4/Pz9AQEBBQUFCQkJDQ0NERERFRUVGRkZHR0dISEhJSUlKSkpLS0tMTExNTU1OTk5PT09QUFBRUVFSUlJTU1NUVFRVVVVWVlZXV1dYWFhZWVlaWlpbW1tcXFxdXV1eXl5fX19gYGBhYWFiYmJjY2NkZGRlZWVmZmZnZ2doaGhpaWlqampra2tsbGxtbW1ubm5vb29wcHBxcXFycnJzc3N0dHR1dXV2dnZ3d3d4eHh5eXl6enp7e3t8fHx9fX1+fn5/f3+AgICBgYGCgoKDg4OEhISFhYWGhoaHh4eIiIiJiYmKioqLi4uMjIyNjY2Ojo6Pj4+QkJCRkZGSkpKTk5OUlJSVlZWWlpaXl5eYmJiZmZmampqbm5ucnJydnZ2enp6fn5+goKChoaGioqKjo6OkpKSlpaWmpqanp6eoqKipqamqqqqrq6usrKytra2urq6vr6+wsLCxsbGysrKzs7O0tLS1tbW2tra3t7e4uLi5ubm6urq7u7u8vLy9vb2+vr6/v7/AwMDBwcHCwsLDw8PExMTFxcXGxsbHx8fIyMjJycnKysrLy8vMzMzNzc3Ozs7Pz8/Q0NDR0dHS0tLT09PU1NTV1dXW1tbX19fY2NjZ2dna2trb29vc3Nzd3d3e3t7f39/g4ODh4eHi4uLj4+Pk5OTl5eXm5ubn5+fo6Ojp6enq6urr6+vs7Ozt7e3u7u7v7+/w8PDx8fHy8vLz8/P09PT19fX29vb39/f4+Pj5+fn6+vr7+/v8/Pz9/f3+/v7////isF19AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAUsElEQVR4nO2dCXxU1b3HbxsXFBWFJ1rRuiB99j19VRCs9QHSan1PSAgiojFhTdKAFQ0IqA1bNLK9CISdx6pR1BAWURoIGITILoaAhiXDEtCQABOSTDKZ7f57//fe2c85M5PMnvP9tHjn/s+Z/OfLLMxvTs4IwGEihLqBcIcL8gAX5AEuyANckAe4IA8EVlCdgt5QR6OJWjE20io6esVUTyvp6RVyd0ERdElBb7pEw0CtiDpa5Sq1UgtaWkl/hVohd8cF2SpckNwDF3SJC1LhgmS4IJlWI0jUHkiIBkGl+yrVI18FaSZ/mjn6JMCOlCFzGqFgitiUXA79f4TClFeXiZqpmROOxMLZd1dMnLxn5vAtkSpI00cQHtyhHPssKL4M8mZBReJ508w1II49sHYpwI8NZ4Zf0qYd0AzYrNeMg7Ox58U3J4vHkiNV0FBB4oFq+dhnQakAP0yD/CXS4SiAEykpOjyd+zHAcY1muAgoKA1gzhaoT5IK1XFxcWvMCmL3ByKDa1GQcBx71vssaBxAyTRYsQ6gdrB0OX2JfHreP+XiWHnA2XRJUBHoUFBtVlbWDr2CeexIGinUSmoyrZJMr6Q24wel2EvtZUHnsOf6ZgrKlx5Yp6U7ysH0pGo8vWYtwMmfsOgiSMb9TuxKeD3EpqGfPspxMwVVJFaaZ68AQ6pm3QzpwdVQlqzVvflttAiqmtrl7iEnlePmCDq2RX4Vy26A3AVgTCnFV7HNI5OkVzFnQYsiVZAjvgpqFuwWEC6I0QLCBTFaQLggRgsIF8RoAeGCGC0gXBCjBYQLYrSAcEGMFhAuiNECwgUxWkCiTxC+3+KC2IJI6XPYZdKbnvzNn79xKAVFkJg3JDU3HY7Egnnuq4lfQhhn0sWY7Nx91EFDMAR9P6JKNy4dg42db+nPxetZmXRdTk7Od40K5sxxNCZQKxPH0ypv0SsTrUdPytng/EYbJn0jBbOFdLZZqzsWrQMolgV9k6YR5VPhmkm3kwXNNNsQLWYKokg663MmjXywC+CkLMj0+avJW1ARNZOWYd+JkUA9xNbKgnY4PJCC8RBbkg+wVxZ0+aq5ZNgpCONMegLegRxKQRFUMvKS/m1Z0GcZxoa0krDOpMt3nXUsBedV7IuhqQUzUUXdpFeSVoo8k24p7BYQLojRAsIFMVpAuCBGCwgXxGgB4YIYLSBcEKMFhAtitIBwQYwWEC6I0QISXYJ8iltbhyDnHJUhKOSR62fDUreFQNCRWOv6XzVuLc0AKM4Ov8h1MsY/q4MvSHqLrq7/VeNWVZDnyNWwf//+iqsKhqKNNAqolW1f0yqb3Svr5XzsP3VQd5WCgV4xk87WeC9IWf+rxq2qIM+Ra2W3bt1yrFfTUQgO7BvjEwbvBSmrN9W4VRXkOXI1X7hwoVarYNAcpnGCWin/kVYpPeZ26vvb0c8T9XBVS6Gphloxk85e8VWQGreWvguwOTv8ItflKGhraJ6DFEFq3Hrqpav69OwwjFz3Tc/+MQSvYqqgY1uscas4J2FC4WoeufoJdgsIF8RoAeGCGC0gXBCjBYQLYrSAcEGMFhAuiNECwgUxWkC4IEYLCBfEaAGJHkH4boILar6gkEWu3y4rsl8IkSAlVU1fMjKtHCA/6eV3tOETuSYJgjC42nopNILUVDV2j7joQ6gaVGWYkedF5BocQcpSxFXWi6ERpKaqI0Q4+D4YtKDLXh1mket4zzfCZ7yMXBE1VZWeg75/H8y5Y9LHrfYicm3Iz88/Wq9gXJNDYzG1smQhrbLAXhksC5qp/pz6Rmiop2DUUSsW0tla7wXZU1VJUFH6FchfHTaR68l7JT+/PW69GJqHmD1VlQStny5Wv7E0fCLX0pSnk0tsl0L0KmZLVSVBV8cPf7votVM8cvUP7BYQLojRAsIFMVpAuCBGCwgXxGgB4YIYLSBcEKMFhAtitIBwQYwWEC6I0QLCBTFaQFqNoCBHrqcriZVQClKiVvhq+N/WZEhvW18bMbc+ZJFr8cOCMLqKUAmhIDVqPTnycv3rGaB9+Yx5/txQbXZ78X5MyTIJlRAKUqPWVWsBtmRAwQfSjU/F89TI9cqoUaM2GBUsL/7Fd56hVh6XY8TeRndMYCKcVXqgFYwWkXS2gSDou3L4Kn6qwU0Ookat2dsADmTAp0ljxowZx4xcayZOnLilScGcPJDGi9TKIGrpz7KgPk3uGMFAOKv0QK+IpLM6d0HZQl5Dh373kRNwNWpd8RlAQQZ8vQjAWInnQxG5VnVBQbMJlcA+xO6ZLq56wLL+t0RBatR6LPlqQ3oGXBzys3l5dsg2uz38lHD729WESmAFtTkACaPgh+uJgtSoFdYNfePLWQDFaYmZtRC6yPUiuRJYQX+YcKbtbph7P1GQyvF8UfxoPWuEE+wWkEj6h+Kma4Ue4ixhFusW67PTXp+tZ42IYkFwrrAeirZ6fetbnyDtpmw4ZuSCFNwFnbijkwBxvzvNBcm4C3r+ZXMMVD8XzwXJuAu6aR/EAOy8lQuScRfUaScK2n43FyTjLiiltzYGSh8exQXJuAuq6X2NcKswQEe8qVyQhLh3Zf4JP+qJMkHlfc/Qb+mpCeqB+QVwO2olgpo6rGiBoOBl0mfHPvHsx5Q5AX4v1mX21t0SFEHKyt/3Yseq8TQehSKTftZpXaszgRUUo0IRpKz8le43ajyN9yBGJq1bvXr1IZ2CaV4mjQ+olelZxNPjlLxVR0QPjeSC1EMDtWIhnfVxs1tJkLLyV9KixtPKQ4yaSVf16dNnqagAXW7zGzfLgh4WyQDlPAsgTmpyF1SjUOeuRxakrPyVtKjxtCIo6Jvdnv8NChpGnhPYh5i6KvsJiiBl5a+kRY2nFUHBz6Rz7xKErqfItcAKKpM4vOwPxyiClJW/5v4WNZ6WjkKTSZdv3EX60BAJxudiBX0ogpSVv+LkUWo8LR21ymXAR28iCWom7BaQSBJ0FNn1vw9xQTLugpTn6NsLuCAZd0HKb7mIfvQTZYKek//UevEetFUKmj1bmI2kteeCZFwFPfWU8BTSk/GevlULAujmRzNRKUihpC8XJOMu6IfuHSSu688FybgL6tnz49tXLLvrlMuNdE4OvQlao1VQ229g6CZYOpAkSNTaL5Gy1ZZGrufnjl3h8g40/ATdvB3mvQWnOlgvFy2YOT6jCqNVTFTtQeuRWPk7w+c0+m8Z8NnfS/+Gf9bZUPgJeubp8p2d9R91tAmKPwsbJuF9BhNVe9AqvW2vSDxvmrmGGbkaf/rppyo1gzMcLqKxT/5zlPwuJ6/GEVFfQ6G+kVbRQS2tZKBXzKSzWndBZY/NMPzxRmGyTVAGgCHeiEqGiw5Bq2QifwmARv4I1p87L2QTHrohg7jzggV0m3fa3owVYcMJV1DJWHAIWiUTK9YB1A7GQdTI1aftkofKgj532q9Y1NP2N9bRK4HdLtllAVXROwAN8WZFiUPQivegpQCn03CQfyJXDS7s7RXuz0GuC6iK4kot/5+F0SrefnvQKj8HVZpnr/DjMuCz0/+20OX3U8JPkOsCqqKpGYkZl0GcPApvvz1oxUvSq1h2QwiXAVMI7gKqohxoKewWkEgS5LqAigtyEcQXUDnhLogvoHLCXRBfQOWEi6D3zvvVTPQJEvYC/ET8WJ4Lsgk66PffEWe3gHBBjBYQLojRAhLFgrz5sjF2C0jkCHp64MA+gvxLxfTbawte3QW1LHKtKPjWbclPmAnqb4emxyF4Vb9szF+R61f3CELXMpdKmAnyAofgVf2yMT/tvFCN22kKg1wqESjIHryqXzYG/lnl2k7OE+/xw4LVwK5y9SjIHryqXzYGjMi1Licn57tGBXPmOBoTpP+/Jgv6r0ZnwNhIoYlaMYCeVjJRK2YL6ayP66RlC/bgVf2yMfBT5BqLgma5VCLwIWYPXtUvG/NX5HruzUd6zHOtRKYga/CqfNlYK4tcAwC7BYQLYrSAcEGMFhAuiNECwgUxWkC4IEYLCBfEaAHhghgtIFwQowWEC2K0gHBBjBaQiBe0faH8H9vGAirF3i2XY7eAtBpBzc+kP3pIeGwzoRIpgmZMTXi3Shak7gcsh9CSoLLhP/sjk94up2WH3SuRIijuqGnpFBSkxtFKCF2cfWF4GTOT9nYv14dkQfPdN1MFE23zVSO9EtC9XMmC/oErOU2SIDWOVkLo4kkpK+U6NZO+nJiY+JlJwfJsVxrd7pAFfWhyAyzu5xTM9AqYaSXqHJNFJJ1t9FbQXOmPBC1ubqLE0UoIXRy7NFG+ihbvvJAvCyp2r0TKQwzvQS9YJEFqHK2E0MUfwLRcrLc8k84ShDuXEiqRIiiu1LxsFj4HqXG0EkJLT9LnXrrin0y6spS4kUKECNqb+27i1BoUZN0PWA6h8WV+/gKeSbcUdgsIF8RoAeGCGC0gXBCjBYQLYrSAcEGMFhAuiNECwgUxWkC4IEYLCBfEaAGJLkG+bbvABTnS3Mi1ZtLzI/YSK5EoyL7TbcEUsSm5vOWR68VelDQoMgXZd7oVxx5Yu5QZueoLCwtP1SkYN6yhMEmOy0bWERCbSGeRBmqlEXS0krGeWjGTzl5tpiA1eIUTKSlyauuXnRf8uWWRvyDuvOAJ+063AOlL5FPUyNVSW1vbdFmh6VI5BeUzjQmXCYgNpLNILb0CNbRSk5ZaMRFPN1OQGrzCwfSkajzV0sh1quTnsbOkSkQ+B9l2ujWkatbN8Msy4N3zvyB/WVgkCrLvdJu7AIwppTxybSnsFhAuiNECwgUxWkC4IEYLCBfEaAHhghgtIFwQowWEC2K0gHBBjBYQLojRAsIFMVpAok+Q0+4Ljqd9jVwvfjKzIPoEYbbqEKy2IHKt6CYIQnL0CRqwWe8QrDIiV0+B2UQ5KttmoMVYERmYKbsvOAarLY1cl/j244NIsyJXJVt1isWokaun0L6vLGiDiRalR2Ror/zuvJOgZkeuJXdLfrpXRt1zkLOglkSuR/4+YGpF9D1JOwhaxHdeaDHsFhAuiNECwgUxWkC4IEYLCBfEaAHhghgtIFwQowWEC2K0gHBBjBYQLojRAsIFMVpAWo0gXyLXsiP246gTtDslJSX2tGbyp5mjTzYvcj3RWxAePWC9FHWCJL56R9TEl0HerOZtdjsAg7LHrZeiUND5pCrQpAL8MA0v+b6xwDVylFitloi/1C8TIRsLuGFO367EQiWyIGrkWpuVlbVDr2AeO9JOW1nQFbVk0dMAE61ioFegiVYy0yvEHuqbKyj3PdFRkO+R69/RT5z1UtQ9xMqGYJptFdScyPXnN++5Y5jGeinqBGUPTktL249Cjm3hkWuLYbeAcEGMFhAuiNECwgUxWkC4IEYLCBfEaAHhghgtIK1ckErh582YtPiQ73PO5Vz1PMiVHWtZ1aAImprkeYwbPVf5Pue7bhW+T8okBFl2uCAuyBNhIEhb1YxJP9d5HuOK/oLJ90ns7oIiKJLhgjzABXkgwIIOj0paaHI58n4OmFK8/eZp+6TClITJlT5OEtcOScgiP+cFVlBDwgnDlI3OR97PgS3jY70UZJ90YeDPTSve8XFS6bBL+g+WEwcFVtCuKQDfj3c+8n4OlO6N91KQfdKhhQAV3v2zwj6pohTMq1YSBwVW0PpF0l/pcOcj7+dIvOClIKdJxlneLeB3nLQ9Pq2ROCjAghZLLQxzPvJ+DvggyD5JLE5bZfZ1EsCV+XOIgwL8EJsG8MNbzkfezwHvBdknifPevuBzd4VFAJoU4qAAP0m/ekGcvgE/HrIe+TIHvBdkn7Q/3Wg2e3cPsk/aNbrBsnIWcVCAX+a/fy11gUn+eEg98mmO94Lsk1bGSjDfXREmicuHDJlOTkr4PxQ9wAV5gAvyABfkAS7IA1yQB7ggD3BBHgiWIOP0/7753xPK2INMwkHpf8FpyI2Y3cTTQRKk7dH+/X8uf+aGL5ij7ILOCIttZ5+azb5uqe44nDzC41WEWNDoTvh5jOX1Wy+515o01iO7IO3Evba6882zj3aoOw4noFyD+0ynASEV9MuvlTSqvmNG7EDpv/M7GGpS77m530mpry879IWyv7a7qVeJ40NMajdmz4v3PfAFdBOE54A0Gi4O6nDH601yXRpe9UrHOxOqwDpN5stH29w7R7kGeabtatQxFf3aPbqx7VFlwLrnb7nf/TPy4AjaKlxUDgb1y72xEaDX62LvXkX7Bt+phZguy09D196FO3p2dxXUq9w06fpG/OsljjY/8j/frfm3f6h//ZbHe3xT1KObxTZN4ty14/dPF/YoI6SZ9qtRxhi79NuTd4dwVBnQKe9oUpum0Aha2EZUDib+rvb6jfDLrw7tveaK9JDqtAliZkkPvRnlAB93cBW0QLqJwinsnjh6c1stwOIkVdA3MecAzv56p22axDbhDIh55coIaab9apQxee3qAFZaBWUBaKQJIRG0SahRDoY+DQOGwvz/EFcKMRJCNsRslU4bvs0ZeruboB0AlxRBxNHTeyjXqQha2BmP719smyZR173tq6sb1BFbweFqlDFTekuDTloFbQOoDJWg04KSlRk7vwFr2xt7zoT829QSPjfq/th53MblboJ22wQRR2f+STmnCJr/IB53nm+bhoi70h7o8LXtOdjpaqQx7z4tHZdbBe0OoSB4qQvuxyNm3nAa6m/4+JoLcFwoBaiOOyb3tflGPcAyhiDi6LxbpAfIJ8+ot64w5rz0pCvdNRwEFeEDsl+87fY7XY005pPbdAC5YSHol4fu+nD7JwOuxc+eXuzwV+nPAY/s+Pa5Lka5r51CbvmyTteVkAX1TNMSRxs6xx1Yf+8YuS49ST/2p+LdT3a1OAra+qt5JRvun6KOcPmh0hj9vQMOfvX7mB9tA0InCBonPXHTg4NK8DBPwK+P1KV1uiVOo/zFiZM7th94qn9fgqA2GljefgBxNJyLu/XOMY1yXTp/cXDHjq9UgW2ahDjzvuvuHmewjnD+oTim/C83P3ko5pJtQAgFhSWV+dKLa+kNFtaYVi3ol+v/r/J4z1TmmFYtCAq6trlrRA1zSOsW5AVckAe4IA9wQR7ggjzABXmAC/IAF+SBfwGByw0CyWpq+gAAAABJRU5ErkJggg==" /><!-- --></p>
</div>
<div id="surrogate-model" class="section level2">
<h2>Surrogate model</h2>
<p>Another way to make the models more interpretable is to replace the black box with a simpler model - a decision tree. We take the predictions of the black box model (in our case the random forest) and train a decision tree on the original features and the predicted outcome. The plot shows the terminal nodes of the fitted tree. The maxdepth parameter controls how deep the tree can grow and therefore how interpretable it is.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tree =<span class="st"> </span>TreeSurrogate<span class="op">$</span><span class="kw">new</span>(predictor, <span class="dt">maxdepth =</span> <span class="dv">2</span>)
<span class="kw">plot</span>(tree)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>We can use the tree to make predictions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(tree<span class="op">$</span><span class="kw">predict</span>(Boston))
<span class="co">#&gt;     .y.hat</span>
<span class="co">#&gt; 1 27.09989</span>
<span class="co">#&gt; 2 27.09989</span>
<span class="co">#&gt; 3 27.09989</span>
<span class="co">#&gt; 4 27.09989</span>
<span class="co">#&gt; 5 27.09989</span>
<span class="co">#&gt; 6 27.09989</span></code></pre></div>
</div>
<div id="explain-single-predictions-with-a-local-model" class="section level2">
<h2>Explain single predictions with a local model</h2>
<p>Global surrogate model can improve the understanding of the global model behaviour. We can also fit a model locally to understand an individual prediction better. The local model fitted by <code>LocalModel</code> is a linear regression model and the data points are weighted by how close they are to the data point for wich we want to explain the prediction.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lime.explain =<span class="st"> </span>LocalModel<span class="op">$</span><span class="kw">new</span>(predictor, <span class="dt">x.interest =</span> X[<span class="dv">1</span>,])
<span class="co">#&gt; Loading required package: glmnet</span>
<span class="co">#&gt; Loading required package: Matrix</span>
<span class="co">#&gt; Loading required package: foreach</span>
<span class="co">#&gt; Loaded glmnet 2.0-16</span>
<span class="co">#&gt; Loading required package: gower</span>
lime.explain<span class="op">$</span>results
<span class="co">#&gt;               beta x.recoded    effect x.original feature feature.value</span>
<span class="co">#&gt; rm       4.4836483     6.575 29.479987      6.575      rm      rm=6.575</span>
<span class="co">#&gt; ptratio -0.5244767    15.300 -8.024493       15.3 ptratio  ptratio=15.3</span>
<span class="co">#&gt; lstat   -0.4348698     4.980 -2.165652       4.98   lstat    lstat=4.98</span>
<span class="kw">plot</span>(lime.explain)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lime.explain<span class="op">$</span><span class="kw">explain</span>(X[<span class="dv">2</span>,])
<span class="kw">plot</span>(lime.explain)</code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAACu1BMVEUAAAABAQEDAwMEBAQGBgYHBwcJCQkKCgoLCwsMDAwNDQ0ODg4PDw8QEBARERESEhITExMUFBQVFRUWFhYXFxcYGBgaGhobGxscHBwdHR0eHh4fHx8jIyMlJSUmJiYoKCgqKiosLCwtLS0vLy8xMTEzMzM1NTU2NjY3Nzc4ODg6Ojo7Ozs9PT0+Pj4/Pz9AQEBBQUFDQ0NERERFRUVGRkZHR0dISEhJSUlKSkpLS0tMTExNTU1OTk5PT09QUFBRUVFSUlJTU1NUVFRVVVVWVlZXV1dYWFhZWVlaWlpbW1tcXFxdXV1eXl5fX19gYGBhYWFiYmJjY2NkZGRlZWVmZmZnZ2doaGhpaWlqampra2tsbGxtbW1ubm5vb29wcHBxcXFycnJzc3N0dHR1dXV2dnZ3d3d4eHh5eXl6enp7e3t8fHx9fX1+fn5/f3+AgICBgYGCgoKDg4OFhYWGhoaHh4eIiIiJiYmKioqLi4uMjIyNjY2Ojo6Pj4+QkJCRkZGSkpKTk5OUlJSVlZWWlpaXl5eYmJiZmZmampqbm5ucnJydnZ2enp6fn5+goKChoaGioqKjo6OkpKSlpaWmpqanp6eoqKipqamrq6usrKytra2urq6vr6+wsLCxsbGysrKzs7O0tLS1tbW2tra4uLi5ubm7u7u8vLy9vb2+vr6/v7/AwMDBwcHCwsLDw8PExMTFxcXGxsbHx8fIyMjJycnKysrLy8vMzMzNzc3Ozs7Pz8/Q0NDR0dHS0tLT09PU1NTV1dXX19fY2NjZ2dna2trb29vc3Nzd3d3e3t7f39/g4ODh4eHi4uLj4+Pk5OTl5eXm5ubn5+fo6Ojp6enq6urr6+vs7Ozt7e3u7u7v7+/w8PDx8fHy8vLz8/P09PT19fX29vb39/f4+Pj5+fn6+vr7+/v8/Pz9/f3+/v7////PGugxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAKmklEQVR4nO3d+2NTZxkH8AjqbrLVucmmm5dpdcpFnVadTQuIhdA6igTD5pgFOm6lwETWVWRD7q7FAU6oZWNMWGEpjMFgMJB1UDtmKRlYaNMmTZrb6Xn+DM89NHnDm7OlKUm+3x+ac56+eZN+OLm1532wEHLDWIb7DtzsARAnAOIEQJwAiBMAcZIGIK+UvojPy0i/n1X1R1hVb5BdDZkYHO5nVX0BVjV9QNekuMlzjZE+dpW6WOUguxpmVa+FmNUBP6va08+qAsgIgIwAyAiAjCqA9ADIqAJID4AABKDhAJo6jAEQgAAEIAABCEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAylAg0R1fcy2YukQvn5glfWmy26qvSJcRuy/HgC4sf+bp9sV1C6qP1pTv04sD9ncjm/6sbneW2yWwSR8H6xYR7asszDmgCXsD7YWXxN9Xiy0z9eLpxdKx4lE2w5VNEtDJ9UQdZURnjxUrQIGmpqY25Wx/Yi4CCLCrwwmk34les0DlIrU7iNbso74y6qiQE/zXisVTFrqU7294vd2uSj23Sb6YqABdyc/PX5vkLVyX4QTS70PILNBcovYKCchJvjK92FDWGtw1X946VCMqQOIRx1YhCiS4XC6PW0ov9bkZ8bOrwwmk34lus0DzGEAHaojck0Rpa1WJrcRq6xFf0A4oDUhJjjwHDQK6OEdO0D29NfhyFdF5vzRCPoKOV4QF4bojKEeBNhjVo46pK6SZij7QgOoLpdhyEuhTBEAAAhCAAAQgAAEIQAACEIAABCAAAQhAAAIQgAAEIAABCEAAAhCAAJQ7QO49q6klDKBEQK33jLaQ9WsfDT/QTdqi6+dThBF0taAYQErigW57h0YQNY8CkJJ4oNHNMtCB+wCkJB7IPt49gs5+czaAlMQD9YwfaRllmeBj/pQAkiIeq29sTTVPFgH1qPEyf0oASZtqHh4qoOTfrN2kQOekvLflWy0ASgCkZv8PAXRDoPdvA1ACoPflHP7Z1wGUAEh9jr57P4ASAPUpEVPtkyVA70YDIBaQJRoAsYAi0QCIBWTkzKMASgB0+jt5Uj5bBKAEQGPHbr+7bsuX2wCUAOjWN+mxPbR5EoASAN1+gF6YT215AEoA9MgPPmx+ILDtSwBKAHTu28+GvneLpRpACYBCNEC+vc0p/6yRNUB5T55M/QexbAJaN+4z36hxASghENHlv4wd+ZMdAEoIRBTenocPqwmB/K8+dufnf9kAoARAE2/53IR/pPzvqlkEZN3hSb1ONgENVbIMaH0+gG4IVP8jAN0QKC7CxMR7OQbEPstVITG6TEp7J2xxBkpfyQa5/VRhj7z/xm9sfzTOEskaoNizXJ3raiqrOukPhXPlLpPUWDZlkVve+3ch0UH7r9f0G9dU+0oKoVDo+PPyvmtyR+BPm7IOKPYsV2dxO72yVD5m5C6TnZM7Q882KHvzqKP0UqTmJeOael9JCiwNyBeXS7qEdVuyDij2LFdnFVGoOCyTlIsUcpNv9d80oEbp8LgwW+83SUZPt7qj6lV3WX9ll6m6SktLd8p/ShJIiJgAirAisqsJyswqDbCqAqvaHw8Ue5arc7X0xdYtk8yVHkA75lTM04Hq/knkKYleVQO6XKH+vuTc4y3XNq+RNjwrV648GJASpJCJBqQUYEVgVweYZXZVjLCqIVa1Lx4o9ixX5yLp41mxoJKQs6KbGo0jaDPRR444oJe1NrjbtxJ1T9Z/uZQ1D7HYs1yd1rMDf11JQtGADLR7lXj1qc3aXkfpFaG2Tu83qQOJv1Vews77j/zOFdi5kLINKPYsV+fyqtKqLhKrZ8tAvZXlC51PtGl70qvYan/sEdSqHnxFH4gN023LO7MN6MNH/0uD4vwEfXxZyRagYF4dgG4ERHserH3jLSmpYclCoBFaAJQAaKiSNUBDvRQh44GwFIEDhKUIHCA1WIrAAcJShIRAWIrAAcJSBA4QliJwgAqUr27zf7bIDaDaWkutHMddAGICjRljGSNnbF2CnzPXgYhS/jfnbANSg7UaCYGwVoMDhLUaHCCs1eAAYa0GBwhrNThAWKvBASKs1eAADXGbwIwHGuo2gRkPNNRtAjMeaKjbBGY8ENoEDko8ENoEDko8ENoEDko8ENoEDkoM0LhOejj1NlkEdF/RMssyNQBSEgPUPLHAUqAGQEpigKSMT7VMkkAZ8z5oqCLfGoAABCAADQ6AjADICICMAMioAsigABCAYgMgAAEIQAACkBEAGQGQUQWQQQEgAMUGQAACEIAABCAjADICIKN6cwC1Pa1tRDtxJt2TU761HAd6bUbZmoC6qfTklHJiVs4BCc9PK31N7sQZ7cmpffOU45J3zTZlU+3JSdRZbs85oOb5gYvFAem4ifbk1LJ9M1Hr48qm1pMzXNmkAAWampravFJ81O9lJCBXGUCssd4wuyowyxFmVQyxqj5Wtdc00JuOC6LywIr25NQ6cb41s9O3UW87qfTD2/B6uwJ0JT8/n9sJjQF0EySkXSYPFNk1beY+UWKJ9uTUIm4rnVE3Q9uRgQ7ViCrQgMfjCXZJ6SFPFyM+r/SFAdTNGhxkVyOsaleIWR3oZ1V7A6yqaaCuXuHM9DaJJdqTU8f2Ex2vug5oVYmtxGrr0SryAzoXnoN2VoX9jjNC0UC0J6fWibOt9Fr/gkNyC04y2t62596TtHfp1LJ6UayeHe3JqX+3sdTeIMotOHMX6NNEvjUAAQhAABocABkBkBEAGQGQUQWQQQEgAMUGQAACEIAABCAjADICIKMKIIMCQACKDYAABCAAAQhARgBkBEBGNfuB4qsA0gMgAAEIQAACkBEAGQGQUQWQHgAZ1RwDktO79mLyg1vWCskP3t9g4m68eMzEYDVpAurIfzv5wbvzQ/xBehbP4I8x8uONJgarARAnAOIkTUARVyD5wX6Xif+Aqfuqibtx2WNisJo0AWVuAMQJgDhJD5C6WPy92WXrI/zBSQ4zOW2T3VZ9xczkWtICpC4W99taQ8te5Q5OcpjJaV2TPg7WLTIxuZ60AKmLxQ8vIzpVyR2c5DCT055cL73XKDMxuZ40PQfJCzV3b5D+Icu5Q5McZnZaovBzm0xNrmaogfY7HKdI+0mkd2mu6dxrJDlMiYlpxSOOrYKpydWk8Qg6vILo9Hzu0CSHmZxWfGGhy+TkatII5J/mEle9wh2a5DCT0x6vCAuCYGpyNWkEolNPzFqXxEtsksPMTVtfKMVmanI1eKPICYA4ARAnAOIEQJwAiBMAcQIgTjITqPn+cbTlC6Y+lX/SZCbQRGsnfWWJN7Y8pjb1N5WZQAXLiPL2xpUB1DPr/tt/8R8ab1HylL5P/5ucd8+TwXyLJeX/i25mAYnjxznfKbnXrR9B+r7w0E/ffumLS3AEHRvZTRQZvUcH0vf33uom2lgGoHrLCCmW1TqQvr/qu+r3cx6o8U5tQwPS95/5vnqZ80DnLWeJrlpbdCB9v+EO6RX/748AiCY8dPBQwYNh42Ve2w89YD2x+6tzaKzDnfKbzCwgn2P0HdYL0fdB+v5F66h75/TTi3dNSPlNZhbQMARAnACIEwBxAiBOAMQJgDgBECcA4gRAnACIk/8DTWg8RZmPsb4AAAAASUVORK5CYII=" /><!-- --></p>
</div>
<div id="explain-single-predictions-with-game-theory" class="section level2">
<h2>Explain single predictions with game theory</h2>
<p>An alternative for explaining individual predictions is a method from coalitional game theory named Shapley value. Assume that for one data point, the feature values play a game together, in which they get the prediction as a payout. The Shapley value tells us how to fairly distribute the payout among the feature values.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">shapley =<span class="st"> </span>Shapley<span class="op">$</span><span class="kw">new</span>(predictor, <span class="dt">x.interest =</span> X[<span class="dv">1</span>,])
shapley<span class="op">$</span><span class="kw">plot</span>()</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>We can reuse the object to explain other data points:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">shapley<span class="op">$</span><span class="kw">explain</span>(<span class="dt">x.interest =</span> X[<span class="dv">2</span>,])
shapley<span class="op">$</span><span class="kw">plot</span>()</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>The results in data.frame form can be extracted like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">results =<span class="st"> </span>shapley<span class="op">$</span>results
<span class="kw">head</span>(results)
<span class="co">#&gt;   feature         phi     phi.var feature.value</span>
<span class="co">#&gt; 1    crim -0.12882211 0.940237610  crim=0.02731</span>
<span class="co">#&gt; 2      zn -0.02696133 0.015591695          zn=0</span>
<span class="co">#&gt; 3   indus -0.27399055 0.450420111    indus=7.07</span>
<span class="co">#&gt; 4    chas -0.01089767 0.003679434        chas=0</span>
<span class="co">#&gt; 5     nox  0.14463748 0.573382362     nox=0.469</span>
<span class="co">#&gt; 6      rm -0.83958762 9.006692107      rm=6.421</span></code></pre></div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
