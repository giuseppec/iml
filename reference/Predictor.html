<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Predictor object — Predictor • iml</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Predictor object — Predictor"><meta property="og:description" content="A Predictor object holds any machine learning model (mlr, caret,
randomForest, ...) and the data to be used for analyzing the model. The
interpretation methods in the iml package need the machine learning model
to be wrapped in a Predictor object."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">iml</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.10.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/intro.html">Introduction to iml: Interpretable Machine Learning in R</a>
    </li>
    <li>
      <a href="../articles/parallel.html">Parallel computation of interpretation methods</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/christophM/iml/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Predictor object</h1>
    <small class="dont-index">Source: <a href="https://github.com/christophM/iml/blob/HEAD/R/Predictor.R" class="external-link"><code>R/Predictor.R</code></a></small>
    <div class="hidden name"><code>Predictor.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A <code>Predictor</code> object holds any machine learning model (<code>mlr</code>, <code>caret</code>,
<code>randomForest</code>, ...) and the data to be used for analyzing the model. The
interpretation methods in the <code>iml</code> package need the machine learning model
to be wrapped in a <code>Predictor</code> object.</p>
    </div>


    <div id="details">
    <h2>Details</h2>
    <p>A Predictor object is a container for the prediction model and the data.
This ensures that the machine learning model can be analyzed in a robust way.</p>
<p>Note: In case of classification, the model should return one column per class
with the class probability.</p>
    </div>
    <div id="public-fields">
    <h2>Public fields</h2>
    <p></p><div class="r6-fields"><dl><dt><code>data</code></dt>
<dd><p><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a><br>
Data object with the data for the model interpretation.</p></dd>


<dt><code>model</code></dt>
<dd><p>(any)<br>
The machine learning model.</p></dd>


<dt><code>batch.size</code></dt>
<dd><p><code>numeric(1)</code><br>
The number of rows to be input the model for prediction at once.</p></dd>


<dt><code>class</code></dt>
<dd><p><code>character(1)</code><br>
The class column to be returned.</p></dd>


<dt><code>prediction.colnames</code></dt>
<dd><p><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a><br>
The column names of the predictions.</p></dd>


<dt><code>prediction.function</code></dt>
<dd><p><a href="https://rdrr.io/r/base/function.html" class="external-link">function</a><br>
The function to predict newdata.</p></dd>


<dt><code>task</code></dt>
<dd><p><code>character(1)</code><br>
The inferred prediction task: <code>"classification"</code> or <code>"regression"</code>.</p></dd>


</dl><p></p></div>
    </div>
    <div id="methods">
    <h2>Methods</h2>
    
<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-new"><code>Predictor$new()</code></a></p></li>
<li><p><a href="#method-predict"><code>Predictor$predict()</code></a></p></li>
<li><p><a href="#method-print"><code>Predictor$print()</code></a></p></li>
<li><p><a href="#method-clone"><code>Predictor$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Create a Predictor object</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va"><a href="../reference/Predictor.html">Predictor</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  model <span class="op">=</span> <span class="cn">NULL</span>,
  data <span class="op">=</span> <span class="cn">NULL</span>,
  predict.function <span class="op">=</span> <span class="cn">NULL</span>,
  y <span class="op">=</span> <span class="cn">NULL</span>,
  class <span class="op">=</span> <span class="cn">NULL</span>,
  type <span class="op">=</span> <span class="cn">NULL</span>,
  batch.size <span class="op">=</span> <span class="fl">1000</span>
<span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>model</code></dt>
<dd><p>any<br>
The machine learning model. Recommended are models from <code>mlr</code> and
<code>caret</code>. Other machine learning with a S3 predict functions work as
well, but less robust (e.g. <code>randomForest</code>).</p></dd>


<dt><code>data</code></dt>
<dd><p><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a><br>
The data to be used for analyzing the prediction model. Allowed column
classes are: <a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a>, <a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a>, <a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a>, <a href="https://rdrr.io/r/base/factor.html" class="external-link">ordered</a> and <a href="https://rdrr.io/r/base/character.html" class="external-link">character</a>
For some models the data can be extracted automatically.
<code>Predictor$new()</code> throws an error when it can't extract the data
automatically.</p></dd>


<dt><code>predict.function</code></dt>
<dd><p><a href="https://rdrr.io/r/base/function.html" class="external-link">function</a><br>
The function to predict newdata. Only needed if <code>model</code> is not a model
from <code>mlr</code> or <code>caret</code> package. The first argument of <code>predict.fun</code> has to
be the model, the second the <code>newdata</code>:</p><div class="sourceCode"><pre><code>function(model, newdata)
</code></pre></div></dd>


<dt><code>y</code></dt>
<dd><p><code>character(1)</code> | <a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a> | <a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a><br> The target vector or
(preferably) the name of the target column in the <code>data</code> argument.
Predictor tries to infer the target automatically from the model.</p></dd>


<dt><code>class</code></dt>
<dd><p><code>character(1)</code>)<br>
The class column to be returned in case
of multiclass output. You can either use numbers, e.g. <code>class=2</code> would
take the 2nd column from the predictions, or the column name of the
predicted class, e.g. <code>class="dog"</code>.</p></dd>


<dt><code>type</code></dt>
<dd><p><code>character(1)</code>)<br>
This argument is passed to the prediction
function of the model. For regression models you usually don't have to
provide the type argument. The classic use case is to say <code>type="prob"</code>
for classification models. Consult the documentation of the machine
learning package you use to find which type options you have. If both
<code>predict.fun</code> and <code>type</code> are used, then type is passed as an argument
to <code>predict.fun</code>.</p></dd>


<dt><code>batch.size</code></dt>
<dd><p><code>numeric(1)</code><br>
The maximum number of rows to be input the model for prediction at once.
Currently only respected for <a href="FeatureImp.html">FeatureImp</a>, <a href="Partial.html">Partial</a> and <a href="Interaction.html">Interaction</a>.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-predict"></a><div class="section">
<h3 id="method-predict-">Method <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code><a class="anchor" aria-label="anchor" href="#method-predict-"></a></h3>
<p>Predict new data with the machine learning model.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">Predictor</span><span class="op">$</span><span class="fu">predict</span><span class="op">(</span><span class="va">newdata</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>newdata</code></dt>
<dd><p><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a><br>
Data to predict on.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-print"></a><div class="section">
<h3 id="method-print-">Method <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code><a class="anchor" aria-label="anchor" href="#method-print-"></a></h3>
<p>Print the Predictor object.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">Predictor</span><span class="op">$</span><span class="fu">print</span><span class="op">(</span><span class="op">)</span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">Predictor</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://mlr.mlr-org.com" class="external-link">"mlr"</a></span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: ParamHelpers</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Warning message: 'mlr' is in 'maintenance-only' mode since July 2019.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Future development will only happen in 'mlr3'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> (&lt;https://mlr3.mlr-org.com&gt;). Due to the focus on 'mlr3' there might be</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> uncaught bugs meanwhile in {mlr} - please consider switching.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘mlr’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following object is masked from ‘package:yaImpute’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     impute</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following object is masked from ‘package:generics’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     train</span>
<span class="r-in"><span class="va">task</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://mlr.mlr-org.com/reference/ClassifTask.html" class="external-link">makeClassifTask</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">iris</span>, target <span class="op">=</span> <span class="st">"Species"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">learner</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://mlr.mlr-org.com/reference/makeLearner.html" class="external-link">makeLearner</a></span><span class="op">(</span><span class="st">"classif.rpart"</span>, minsplit <span class="op">=</span> <span class="fl">7</span>, predict.type <span class="op">=</span> <span class="st">"prob"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">mod.mlr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://mlr.mlr-org.com/reference/train.html" class="external-link">train</a></span><span class="op">(</span><span class="va">learner</span>, <span class="va">task</span><span class="op">)</span></span>
<span class="r-in"><span class="va">mod</span> <span class="op">&lt;-</span> <span class="va">Predictor</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">mod.mlr</span>, data <span class="op">=</span> <span class="va">iris</span><span class="op">)</span></span>
<span class="r-in"><span class="va">mod</span><span class="op">$</span><span class="fu">predict</span><span class="op">(</span><span class="va">iris</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   setosa versicolor virginica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1          0         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1          0         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      1          0         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      1          0         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      1          0         0</span>
<span class="r-in"></span>
<span class="r-in"><span class="va">mod</span> <span class="op">&lt;-</span> <span class="va">Predictor</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">mod.mlr</span>, data <span class="op">=</span> <span class="va">iris</span>, class <span class="op">=</span> <span class="st">"setosa"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">mod</span><span class="op">$</span><span class="fu">predict</span><span class="op">(</span><span class="va">iris</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="op">]</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   setosa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      1</span>
<span class="r-in"></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://www.stat.berkeley.edu/~breiman/RandomForests/" class="external-link">"randomForest"</a></span><span class="op">)</span></span>
<span class="r-in"><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/randomForest/man/randomForest.html" class="external-link">randomForest</a></span><span class="op">(</span><span class="va">Species</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">iris</span>, ntree <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">mod</span> <span class="op">&lt;-</span> <span class="va">Predictor</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">rf</span>, data <span class="op">=</span> <span class="va">iris</span>, type <span class="op">=</span> <span class="st">"prob"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">mod</span><span class="op">$</span><span class="fu">predict</span><span class="op">(</span><span class="va">iris</span><span class="op">[</span><span class="fl">50</span><span class="op">:</span><span class="fl">55</span>, <span class="op">]</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   setosa versicolor virginica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1       0.00      0.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      0       1.00      0.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      0       1.00      0.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      0       0.95      0.05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      0       1.00      0.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      0       0.95      0.05</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Feature importance needs the target vector, which needs to be supplied:</span></span>
<span class="r-in"><span class="va">mod</span> <span class="op">&lt;-</span> <span class="va">Predictor</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">rf</span>, data <span class="op">=</span> <span class="va">iris</span>, y <span class="op">=</span> <span class="st">"Species"</span>, type <span class="op">=</span> <span class="st">"prob"</span><span class="op">)</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Christoph Molnar, <a href="https://pat-s.me" class="external-link">Patrick Schratz</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer></div>

  


  

  </body></html>

